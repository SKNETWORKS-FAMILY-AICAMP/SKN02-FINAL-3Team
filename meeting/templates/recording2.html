<!DOCTYPE html>
{% load static %}
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>회의 종료</title>
    <link href="{% static 'meeting/bootstrap/bootstrap.css' %}" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="{% static 'meeting/css/recording2.css' %}" media="screen">
  </head>
  <body>
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          <h3 class="modal-title">회의 종료</h3>
        </div>

        <div class="modal-body">
          <div class="title_area">
            <strong class="option_title">
              <label for="title_input_element">제목 : &nbsp;</label>
              <input id="title_input_element" type="text" class="user_input" tabindex="1" autocomplete="off" value="">
            </strong>
          </div>
          <p>
          <div class="attendent_area">
            <strong class="option_title">
              <label for="attendent_input_element">참석자 : &nbsp;</label>
              <div id="attendent_input_element" class="NickName-input-container">
                <input type="text" id="NickName_input" class="user_input" autocomplete="off" placeholder="확인자 외 닉네임 입력 후 쉼표로 구분">
              </div>
            </strong>
          </div>
          </p>
          <p>
          <div class="attendent_area">
            <strong class="option_title">
              <label for="attendent_input_element">확인자 : &nbsp;</label>
              <div id="attendent_input_element" class="NickName-input-container">
                <input type="text" id="NickName_input" class="user_input" autocomplete="off" placeholder="닉네임 입력">
              </div>
            </strong>
          </div>
          </p>
          <p>
            회의를 저장하시겠습니까? 저장하지 않고 나가면 회의가 저장되지 않습니다.
          </p>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-primary">예</button>
          <button type="button" class="btn btn-secondary">아니요</button>
        </div>
      </div>
    </div>



    <script type="module">


      const NickNameInputElement = document.getElementById('NickName_input');
      const NickNameContainer = document.getElementById('attendent_input_element');

      NickNameInputElement.addEventListener('keydown', function (event) {
        if (event.key === ',' || event.key === 'Enter') {
          event.preventDefault();
          if (NickNameInputElement.value.trim() !== '') {
            addNickNameChip(NickNameInputElement.value.trim());
            NickNameInputElement.value = '';
          }
        }
      });


      NickNameInputElement.addEventListener('blur', function () {
        // 마지막 닉네임 입력 후 포커스를 잃을 때 처리
        if (NickNameInputElement.value.trim() !== '') {
          addNickNameChip(NickNameInputElement.value.trim());
        }
      });

      function addNickNameChip(NickName) {
        if (NickName !== '') {
          const chip = document.createElement('div');
          chip.className = 'NickName-chip';
          chip.innerHTML = `${NickName} <span class="remove">&times;</span>`;
          chip.querySelector('.remove').addEventListener('click', () => {
            chip.remove();
          });
          NickNameContainer.insertBefore(chip, NickNameInputElement);
          NickNameInputElement.value = '';
        }
      }

      function finalizeNickNames() {
        // 모든 닉네임 버튼으로 변환되도록 마지막 닉네임까지 처리
        if (NickNameInputElement.value.trim() !== '') {
          addNickNameChip(NickNameInputElement.value.trim());
          NickNameInputElement.value = '';
        }
      }
    </script>
  </body>
</html>